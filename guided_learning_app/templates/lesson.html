{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>{{ lesson.title }}</h2>
  <p class="goal">Goal: {{ lesson.goal }}</p>
  <div class="content">
    <h3>Explain</h3>
    <p>{{ lesson.explain }}</p>

    <h3>Example</h3>
    <pre>{{ lesson.example }}</pre>

    <h3>Practice</h3>
    <p>{{ lesson.practice }}</p>
  </div>
</section>

<section class="card">
  <h3>Mentor Checkpoint</h3>
  <p class="question">{{ lesson.check.question }}</p>

  <form action="{{ url_for('check_answer') }}" method="post">
    <input type="hidden" name="lesson_id" value="{{ lesson.id }}" />
    <textarea name="answer" rows="4" placeholder="Write your answer here...">{{ user_answer or '' }}</textarea>
    <div class="actions">
      <button type="submit" class="primary">Submit</button>
      <a class="ghost" href="{{ url_for('index') }}">Back to path</a>
    </div>
  </form>

  {% if result %}
    <div class="mentor-feedback {% if result.is_correct %}success{% else %}warning{% endif %}">
      <p>{{ result.feedback }}</p>
      {% if result.hints %}
        <ul>
          {% for hint in result.hints %}
            <li>{{ hint }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  {% endif %}

  <p class="attempts">Attempts: {{ attempts }}</p>

  {% if completed and next_lesson_id %}
    <a class="secondary" href="{{ url_for('lesson', lesson_id=next_lesson_id) }}">Next lesson</a>
  {% elif completed %}
    <p class="done">You finished the learning path. Nice work!</p>
  {% endif %}
</section>
{% endblock %}
